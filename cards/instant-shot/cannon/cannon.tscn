[gd_scene load_steps=12 format=3 uid="uid://2tjlbxpk1mnw"]

[ext_resource type="Texture2D" uid="uid://bmul2h5mjqxu6" path="res://cards/instant-shot/cannon/Shot Particle 64 x 64.png" id="1_t5bb1"]
[ext_resource type="AudioStream" uid="uid://4p8lybjjwbxh" path="res://cards/instant-shot/cannon/515801__matrixxx__retro-pirate-cannon-shot.wav" id="2_ldepj"]

[sub_resource type="CylinderMesh" id="CylinderMesh_5g0nn"]
top_radius = 0.15
bottom_radius = 0.15
height = 0.4
radial_segments = 8
rings = 2

[sub_resource type="TorusMesh" id="TorusMesh_t5bb1"]
inner_radius = 0.03
outer_radius = 0.2
rings = 8
ring_segments = 3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ldepj"]
transparency = 1
blend_mode = 1
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("1_t5bb1")
emission_enabled = true

[sub_resource type="QuadMesh" id="QuadMesh_vpo5q"]
material = SubResource("StandardMaterial3D_ldepj")
size = Vector2(0.5, 0.5)
center_offset = Vector3(0.48, 0, 0)

[sub_resource type="Curve" id="Curve_fu012"]
_data = [Vector2(0, 0.0898877), 0.0, 0.0, 0, 0, Vector2(0.204545, 1), -0.596989, -0.596989, 0, 0, Vector2(0.664773, 1), -0.639788, -0.639788, 0, 0, Vector2(1, 0.348315), -3.86089, 0.0, 0, 0]
point_count = 4

[sub_resource type="Gradient" id="Gradient_clv5m"]
offsets = PackedFloat32Array(0, 0.393333, 0.58, 0.96)
colors = PackedColorArray(1, 1, 0, 0, 1, 1, 0, 1, 1, 0.427451, 0, 1, 1, 0.223529, 0, 0.427451)

[sub_resource type="Animation" id="Animation_ldepj"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Blast:emitting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("AudioStreamPlayer:playing")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_t5bb1"]
resource_name = "shoot"
length = 0.4
step = 0.02
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Blast:emitting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.16, 0.4),
"transitions": PackedFloat32Array(0.164939, 1, 1),
"update": 0,
"values": [Vector3(0.1, 0.33, 0.2), Vector3(-0.1, 0.33, -0.1), Vector3(0.1, 0.33, 0.2)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("AudioStreamPlayer:playing")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_vpo5q"]
_data = {
&"RESET": SubResource("Animation_ldepj"),
&"shoot": SubResource("Animation_t5bb1")
}

[node name="Cannon" type="Node3D"]

[node name="Barrel" type="MeshInstance3D" parent="."]
transform = Transform3D(-3.09086e-08, 0.707107, -0.707107, -1, -4.37114e-08, 0, -3.09086e-08, 0.707107, 0.707107, 0, 0, 0)
mesh = SubResource("CylinderMesh_5g0nn")

[node name="Opening" type="MeshInstance3D" parent="."]
transform = Transform3D(-3.09086e-08, 0.707107, -0.707107, -1, -4.37114e-08, 0, -3.09086e-08, 0.707107, 0.707107, 0.14, 0, 0.14)
mesh = SubResource("TorusMesh_t5bb1")

[node name="Blast" type="CPUParticles3D" parent="."]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 0, 0, 0)
emitting = false
amount = 1
lifetime = 0.4
one_shot = true
local_coords = true
mesh = SubResource("QuadMesh_vpo5q")
gravity = Vector3(0, 0, 0)
scale_amount_min = 0.9
scale_amount_max = 1.2
scale_amount_curve = SubResource("Curve_fu012")
color = Color(1, 1, 0, 1)
color_ramp = SubResource("Gradient_clv5m")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("2_ldepj")
volume_db = -8.0
pitch_scale = 0.6

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_vpo5q")
}
